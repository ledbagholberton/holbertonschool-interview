#include <stdlib.h>
#include <stdio.h>

#include "slide_line.h"

/**
 * slide_line - Function 2048
 *
 * @line: pointer to array of integers
 * @size: size of array
 * @direction: direction to sum
 * Return: 1 or 0
**/
int slide_line(int *line, size_t size, int direction)
{
    int flag = 0;
    int array1[32];
    size_t i, j, pos = 0;
    for (i = 0; i < size; i++)
	array1[i] = 1;
    if (direction == 1)
	{
	    for (i = 0; i < size; i++)
		{
		    if (line[i] == 0)
			{
			    array1[i]=1;
			}
		    else
			{
			    if (flag == 0)
				{
				    pos = i;
				    flag = 1;
				    array1[i] = 1;
				}
			    else
				{
				    if (line[i] == line[pos])
					{
					    array1[pos] = 2;
					    array1[i] = 0;
					    flag = 0;
					}
				    else
					{
					    array1[i] = 1;
					    pos = i;
					}                
				}
			}
		}
	}
    else
	{
	    for (i = size; (int) i >= 0; i--)
		{
		    if (line[i] == 0)
			{
			    array1[i]=1;
			}
		    else
			{
                if (flag == 0)
		    {
			pos = i;
			flag = 1;
			array1[i] = 1;
		    }
                else
		    {
			if (line[i] == line[pos])
                    {
                        array1[pos] = 2;
                        array1[i] = 0;
                        flag = 0;
                    }
			else
			    {
				array1[i] = 1;
				pos = i;
			    }                
		    }
			}
        }
	}
    for (i=0; i < size; i++)
        array1[i] = array1[i] * line[i];
    for (i = 0; i < size; i++)
        line[i] = 0;
    if (direction == 1)
	{
	    for (i = 0; i < size; i++)
		{
		    if (array1[i] != 0)
			{
			    line[j] = array1[i];
			    j = j + 1;
			}
		}
	}
    else
	{
	    j = size;
	    for (i = size; (int) i >= 0; i--)
		{
		    if (array1[i] != 0)
			{
			    line[j] = array1[i];
			    j = j - 1;
			}            
		}
	}
    return(1);
}

/**
 * print_array - Prints out an array of integer, followed by a new line
 * 
 * @array: Pointer to the array of integer to be printed
 * @size: Number of elements in @array
 */
void print_array1(int const *array, size_t size)
{
    size_t i;

    printf("&&&&: ");
    for (i = 0; i < size; i++)
        printf("%s%d", i > 0 ? ", " : "", array[i]);
    printf("\n");
}
